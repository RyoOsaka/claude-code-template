# React + Supabase スタック用 CLAUDE.md 追記例

以下の内容を CLAUDE.md の該当セクションに追記する。

## セットアップ手順

```bash
# ルールファイルをコピー
cp examples/react-supabase/rules/* .claude/rules/

# スキルファイルをコピー
cp -r examples/react-supabase/skills/* .claude/skills/
```

## Tech Stack

- Frontend: React + TypeScript + Vite
- Backend: Supabase (PostgreSQL, Auth, Storage)
- Styling: CSS Modules
- State: React Context API / Zustand
- Data Fetching: TanStack Query
- Hosting: Vercel
- Package Manager: pnpm

## Development Commands

```bash
pnpm install              # 依存パッケージインストール
pnpm dev                  # 開発サーバー起動
pnpm build                # プロダクションビルド
pnpm preview              # ビルドプレビュー
pnpm lint                 # ESLint
pnpm typecheck            # 型チェック
pnpm test                 # テスト実行
pnpm types:gen            # Supabase 型定義生成
docker compose up         # Docker 開発環境起動
```

## Project Structure

```
src/
├── components/
│   ├── common/           # 汎用 UI コンポーネント
│   └── features/         # 機能特化コンポーネント
├── pages/                # ページコンポーネント
├── hooks/                # カスタムフック
├── lib/supabase.ts       # Supabase クライアント（一元管理）
├── types/database.types.ts  # Supabase 自動生成型
├── contexts/             # React Context
└── constants/            # 定数
```

## Critical Rules（追加分）

### NEVER
- `any` 型を使用しない（`unknown` + 型ガードを使う）
- `@ts-ignore` / `@ts-nocheck` を使用しない
- Supabase の認証情報をハードコードしない
- RLS なしでテーブルを公開しない

### YOU MUST
- すべてのコンポーネントに Props 型定義を付ける
- `tsconfig.json` で `strict: true`

## 含まれるルール・スキル

### rules/
| ファイル | 内容 |
|---------|------|
| typescript.md | TypeScript 型定義・エラーハンドリング・インポートルール |
| react.md | コンポーネント設計・Hooks・状態管理・パフォーマンス（パス条件付き） |
| supabase.md | Supabase クライアント・セキュリティ・クエリ・型定義（パス条件付き） |
| security.md | 認証・環境変数・入力値バリデーション・依存関係 |

### skills/
| スキル | 呼び出し | 内容 |
|--------|---------|------|
| component | `/component <名前>` | React コンポーネント + CSS Modules + テスト生成 |
| api | `/api <リソース名>` | Supabase + TanStack Query データ取得フック生成 |
| page | `/page <ページ名>` | ページコンポーネント + ルーティング設定 |
